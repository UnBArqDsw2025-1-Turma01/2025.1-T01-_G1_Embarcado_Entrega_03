# 3.3. Módulo Padrões de Projeto GoFs Comportamentais

<br>

<div class="image-embed-container" data-image-path="../../assets/strategy.png" data-title="Strategy" style="height: 70vh;"></div>

<br>

<div style="text-align:center;">
Autores: Altino Arthur, Márcio Henrique e Daniel de Sousa
</div>

## Implementação em código - Strategy (Notificação)


```java
public interface IEnvio {
    void enviar(Notificacao n);
}
```

```java
public class EstrategiaEmail implements IEnvio {
    @Override
    public void enviar(Notificacao n) {
        System.out.println("[EstrategiaEmail] Enviando E-mail para " + n.getDestinatario().getContato().getEmail() + ": " + n.getBaseadaEmResultado().getResumo());
    }
}
```

```java
public class EstrategiaPush implements IEnvio {
    @Override
    public void enviar(Notificacao n) {
        System.out.println("[EstrategiaPush] Enviando Notificação Push para " + n.getDestinatario().getNome() + ": " + n.getBaseadaEmResultado().getResumo());
    }
}
```


```java
public class EstrategiaSMS implements IEnvio {
    @Override
    public void enviar(Notificacao n) {
        System.out.println("[EstrategiaSMS] Enviando SMS para " + n.getDestinatario().getContato().getTelefone() + ": " + n.getBaseadaEmResultado().getResumo());
    }
}
```

<div style="text-align:center;">
Autores: Altino Arthur, Márcio Henrique e Daniel de Sousa
</div>

## Testando o Strategy (Notificação)

```java
public class SistemaMonitoramentoTest {

    public static void main(String[] args) {
        System.out.println("\n--- Iniciando Testes do Padrão Strategy para Notificações ---");

        // Criar entidades necessárias para simular o cenário de notificação
        Contato contatoCuidador = new Contato("cuidador.teste@example.com", "5511987654321");
        Endereco enderecoCuidador = new Endereco("Rua dos Testes", "10", "Cidade Teste", "TS", "00000-000");
        PessoaCuidador cuidadorTeste = new PessoaCuidador("Ana Cuidadora", Genero.Feminino, "111.222.333-44", LocalDate.of(1985, 5, 10), contatoCuidador, enderecoCuidador);

        ResultadoAnalise resultadoQueda = new ResultadoAnalise(0.8, true, Situacao.QuedaDetectada);
        ResultadoAnalise resultadoNormal = new ResultadoAnalise(0.1, false, Situacao.TudoBem);

        System.out.println("\n--- Cenário 1: Notificação via SMS ---");
        Notificacao notificacaoSMS = new Notificacao(Prioridade.Baixa, TipoAlerta.SMS, cuidadorTeste, resultadoNormal);
        System.out.println("Status inicial da notificação SMS: " + notificacaoSMS.getEstado());
        notificacaoSMS.enviar();
        System.out.println("Status final da notificação SMS: " + notificacaoSMS.getEstado());
        if (notificacaoSMS.getEstado() != StatusNotificacao.Enviado) {
            System.err.println("ERRO: Status da notificação SMS não é ENVIADO.");
        }

        System.out.println("\n--- Cenário 2: Notificação via Email ---");
        Notificacao notificacaoEmail = new Notificacao(Prioridade.Media, TipoAlerta.Email, cuidadorTeste, resultadoNormal);
        System.out.println("Status inicial da notificação Email: " + notificacaoEmail.getEstado());
        notificacaoEmail.enviar();
        System.out.println("Status final da notificação Email: " + notificacaoEmail.getEstado());
        if (notificacaoEmail.getEstado() != StatusNotificacao.Enviado) {
            System.err.println("ERRO: Status da notificação Email não é ENVIADO.");
        }

        System.out.println("\n--- Cenário 3: Notificação via Push ---");
        Notificacao notificacaoPush = new Notificacao(Prioridade.Alta, TipoAlerta.Push, cuidadorTeste, resultadoQueda);
        System.out.println("Status inicial da notificação Push: " + notificacaoPush.getEstado());
        notificacaoPush.enviar();
        System.out.println("Status final da notificação Push: " + notificacaoPush.getEstado());
        if (notificacaoPush.getEstado() != StatusNotificacao.Enviado) {
            System.err.println("ERRO: Status da notificação Push não é ENVIADO.");
        }

        System.out.println("\n--- Cenário 4: Alteração manual do estado da notificação ---");
        Notificacao notificacaoManual = new Notificacao(Prioridade.Baixa, TipoAlerta.SMS, cuidadorTeste, resultadoNormal);
        System.out.println("Status antes da alteração manual: " + notificacaoManual.getEstado());
        notificacaoManual.alterarEstado(StatusNotificacao.Ignorado);
        System.out.println("Status após alteração manual para IGNORADO: " + notificacaoManual.getEstado());
        if (notificacaoManual.getEstado() != StatusNotificacao.Ignorado) {
            System.err.println("ERRO: Status da notificação manual não é IGNORADO.");
        }

        System.out.println("\n--- Cenário 5: Tentativa de criação com tipo de alerta nulo (comportamento esperado: exceção) ---");
        try {
            new Notificacao(Prioridade.Baixa, null, cuidadorTeste, resultadoNormal);
            System.err.println("ERRO: Nenhuma exceção lançada para TipoAlerta nulo.");
        } catch (IllegalArgumentException e) {
            System.out.println("Sucesso: Exceção capturada para TipoAlerta nulo: " + e.getMessage());
            if (!e.getMessage().contains("nulo")) {
                System.err.println("ERRO: Mensagem de exceção inesperada para TipoAlerta nulo.");
            }
        }

        System.out.println("\n--- Todos os Testes de Notificação Strategy Concluídos ---");
    }
}
```

<div style="text-align:center;">
Autores: Altino Arthur, Márcio Henrique e Daniel de Sousa
</div>

## Resultados dos Testes Strategy

<br>

<div class="image-embed-container" data-image-path="../../assets/test_strategy.png" data-title="Strategy" style="height: 70vh;"></div>

<br>

<div style="text-align:center;">
Autores: Altino Arthur, Márcio Henrique e Daniel de Sousa
</div>


Foco_3: Padrões de Projeto GoFs Comportamentais.

Entrega Mínima: 1 Padrão GoF Comportamental, com nível de modelagem e nível de implementação evidenciados (ou seja, código rodando e hospedado no repositório do projeto).

Apresentação (para a professora) explicando o GoF Comportamental, com: (i) rastro claro aos membros participantes (MOSTRAR QUADRO DE PARTICIPAÇÕES & COMMITS); (ii) justificativas & senso crítico sobre o padrão GOF comportamental; e (iii) comentários gerais sobre o trabalho em equipe. Tempo da Apresentação: +/- 5min. Recomendação: Apresentar diretamente via Wiki ou GitPages do Projeto. Baixar os conteúdos com antecedência, evitando problemas de internet no momento de exposição nas Dinâmicas de Avaliação. Deve ser mostrado o GoF Comportamental em execução no dia da apresentação.

A Wiki ou GitPages do Projeto deve conter um tópico dedicado ao Módulo Padrões de Projeto GoFs Comportamentais, com 1 padrão GoF Comportamental (modelagem & implementação, com código rodando), histórico de versões, referências, e demais detalhamentos gerados pela equipe nesse escopo.

Demais orientações disponíveis nas Diretrizes (vide Moodle).
